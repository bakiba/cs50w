{% extends "auctions/layout.html" %}
{% load auction_filters %}

{% block body %}
    <h2>Active Listings</h2>
    <!-- layout insipired by https://www.ordinarycoders.com/blog/article/django-models -->
    <div class="container p-4 ml-0">
        <div class="card-columns">
            {% for l in listings %}
            <div class="card" style="width: 20rem;">
              {% if l.image_url %}
                
                    <!-- how to handle missing images taken from https://blog.imagekit.io/how-to-handle-loading-images-that-may-not-exist-on-your-website-92e6c3c6ea63 -->
                    <!-- image placeholder taken from https://github.com/dwyl/learn-tachyons/issues/46-->
                    <img src="{{ l.image_url }}" class="card-img" alt="{{ l.title}}" style="object-fit: contain;" onerror="this.onerror=null;this.src='/static/auctions/blank_img.png';">
                {% endif %}
                <div class="card-body">
                    <h4 class="card-title" style="display: inline-block;">{{l.title}}</h4>
                    {% if user.is_authenticated %}
                        <a href="#" class="badge badge-secondary" data-toggle="tooltip" title="Click to remove">Watchlist</a>
                    {% endif %}
                    <p class="text-muted">Added: {{l.created}}</p>
                    <h5>${{l.id|price}}</h5>
                    <p class="card-text" >{{l.description}}</p>
                    <a href="{% url 'listing' l.id %}" class="card-link">Details</a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'listing' l.id %}" class="card-link float-right">Add to watchlist</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
          
    </div>
      
{% endblock %}